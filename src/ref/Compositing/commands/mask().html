<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head>

  <title></title>

</head><body>
  <div class="section">
    <h3>mask()</h3>

    <div class="definition">
      <h2>Syntax</h2>

      <div class="row">
        <pre>with mask(stencil, channel="alpha"):</pre>
      </div>

      <h2>Description</h2>

      <div class="row">
        <p>Sets an inverted clipping region for a block of drawing commands.</p>

        <p>All drawing operations within the block will be constrained by a <a href="Drawing.html#Bezier">Bezier</a>, <a href="Primitives.html#Image">Image</a>, or <a href="Typography.html#Text">Text</a> object passed as the <code>stencil</code> argument. If masking to a path, only content drawn <em>outside</em> of the filled path will be visible. When masking to an image, drawing operations will have high opacity in places where the mask value is <em>low</em>.</p>

        <p>The optional <code>channel</code> arg applies only to image-based stencils and specifies which component of the stencil's pixels should be used for this calculation. If omitted it defaults to <code class="str">"alpha"</code> (if available) or <code class="str">"black"</code> level (if the image is opaque).</p>

        <p>When an object is used as a <code>stencil</code> arg, it is ‘consumed’ by the operation and will not be directly visible on the canvas. As a result, it's perfectly safe to include calls to <a href="Primitives.html">Primitives</a> or the <a href="Primitives.html#image()">image()</a> command within the call to mask().</p>
      </div>

      <h2>See Also</h2>
      <div class="row">
        <p>The <a href="clip()">clip()</a> command uses the same syntax as mask() but has an opposite effect.</p>
      </div>

      <h2>Example</h2>

      <div class="row">
        <table border="0">
          <tbody>
            <tr>
              <td><span class="image_border"><img src="../etc/ref/mask.png"/></span>
              </td><td>
<pre>
with mask(poly(64,64, 50, sides=5)):
    image('plaid.png')
</pre>
              </td></tr>
            <tr>
              <td><span class="image_border"><img src="../etc/ref/mask-image.png"/></span>
              </td><td>
<pre>
with mask(image('logo-stencil.png')):
    image('plaid.png')
</pre>
using the <a href="../etc/ref/logo-stencil.png">logo-stencil.png</a> image
              </td></tr>

            <tr>
              <td><span class="image_border"><img src="../etc/ref/mask-text.png"/></span>
              </td><td>
<pre>
font("Avenir", "bold", 112)
with mask(text('Hi', 4, 112)):
    image('related/plaid.png')
</pre>
              </td></tr>
            </tbody></table>

      </div>
    </div>
  </div>

</body></html>